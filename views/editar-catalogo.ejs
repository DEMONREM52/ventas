<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalogo - Editar producto</title>
    <link rel="shortcut icon" href="https:/res.cloinary.com/dvyenqzki/image/upload/v1727116739/LOGO-VARISTI_eulwve.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Doodle+Shadow&display=swap" rel="stylesheet">


    <style>
   @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap');
    html{
    zoom: 0.8;
}
body {
        font-family: "Roboto Slab", serif;
        font-optical-sizing: auto;
        font-weight: 500;
        font-style: normal;
        font-optical-sizing: auto;
        font-weight: 800;
        font-style: normal;
        background: rgb(4, 125, 128);
        background: linear-gradient(0deg, rgb(4, 125, 128) 0%, rgb(145, 253, 255) 42%, rgb(219, 254, 255) 100%);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        width: 100%;
        max-width: auto;
        color: #000000;
    }

        .card {
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            /* Margen inferior añadido */
        }

        .card-header {
            background-color: #000000;
            color: #fff;
            border-bottom: none;
            text-align: center;
        }

        .form-label {
            font-weight: bold;
        }

        .form-control {
            border-radius: 0;
            border-color: #ced4da;
        }

        .form-control:focus {
            border-color: #007bff;
            box-shadow: none;
        }

        .btn-primary {
            background-color: #000000;
            border-color: #000000;
            border: #fff;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .custom-select {
            border: none;
            border-radius: 0;
            padding: 10px 0;
            height: auto;
        }

        .custom-select:focus {
            border-color: #007bff;
            box-shadow: none;
        }

        .btn {
            color: #ffffff;
            background-color: #160115;
            font-size: 15px;
            font-weight: bold;
            text-transform: uppercase;
            width: 100%;
            padding: 12px 15px 11px;
            border-radius: 20px;
            box-shadow: 1px 1px 1px #cbced1, -1px -1px 1px #fff;
            border: none;
            transition: all 0.5s ease 0s;
            margin-top: 19px;
        }
    </style>
</head>

<body>

    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">EDITAR PRODUCTO</h4>
                    </div>
                    <div class="card-body">
                        <form action="/editar-catalogo/<%= catalogo.id %>" method="POST" onsubmit="return validateForm()">
                            <!-- Agregar campo oculto para el nombre de usuario -->
                            <input type="hidden" id="nombreUsuario" name="nombreUsuario" value="<%= usuario ? usuario.nombre : '' %>">
                        
                            <div class="form-group">
                                <label for="marca"><b>CATALOGO</b></label>
                                <select class="form-control" id="marca" name="marca" required>
                                    <option style="display: none;" value="">SELECCIONE UN CATALOGO</option>


                                    <option value="Audifonos" <%= catalogo.marca === 'Audifonos' ? 'selected' : '' %>>AUDÍFONOS</option>
                                    <option value="Belleza" <%= catalogo.marca === 'Belleza' ? 'selected' : '' %>>BELLEZA</option>
                                    <option value="Bombillos" <%= catalogo.marca === 'Bombillos' ? 'selected' : '' %>>BOMBILLOS</option>
                                    <option value="BolsasViajeras" <%= catalogo.marca === 'BolsasViajeras' ? 'selected' : '' %>>BOLSAS VIAJERAS</option>
                                    <option value="Calculadoras" <%= catalogo.marca === 'Calculadoras' ? 'selected' : '' %>>CALCULADORAS</option>
                                    <option value="CablesCargadores" <%= catalogo.marca === 'CablesCargadores' ? 'selected' : '' %>>CABLES-CARGADORES</option>
                                    <option value="Camaras" <%= catalogo.marca === 'Camaras' ? 'selected' : '' %>>CÁMARAS</option>
                                    <option value="Campamento" <%= catalogo.marca === 'Campamento' ? 'selected' : '' %>>CAMPAMENTO</option>
                                    <option value="Candados" <%= catalogo.marca === 'Candados' ? 'selected' : '' %>>CANDADOS</option>
                                    <option value="Cocina" <%= catalogo.marca === 'Cocina' ? 'selected' : '' %>>COCINA</option>
                                    <option value="ControlesTV" <%= catalogo.marca === 'ControlesTV' ? 'selected' : '' %>>CONTROLES TV</option>
                                    <option value="Deporte" <%= catalogo.marca === 'Deporte' ? 'selected' : '' %>>DEPORTE</option>
                                    <option value="Exprimidores" <%= catalogo.marca === 'Exprimidores' ? 'selected' : '' %>>EXPRIMIDORES</option>
                                    <option value="Escolar" <%= catalogo.marca === 'Escolar' ? 'selected' : '' %>>ESCOLAR</option>
                                    <option value="ExtensionesyMultitomas" <%= catalogo.marca === 'ExtensionesyMultitomas' ? 'selected' : '' %>>EXTENSIONES Y MULTITOMAS</option>
                                    <option value="Ferreteria" <%= catalogo.marca === 'Ferreteria' ? 'selected' : '' %>>FERRETERÍA</option>
                                    <option value="Grameras" <%= catalogo.marca === 'Grameras' ? 'selected' : '' %>>GRAMERAS</option>
                                    <option value="HervidoresyCafeteras" <%= catalogo.marca === 'HervidoresyCafeteras' ? 'selected' : '' %>>HERVIDORES Y CAFETERAS</option>
                                    <option value="Humidificadores" <%= catalogo.marca === 'Humidificadores' ? 'selected' : '' %>>HUMIDIFICADORES</option>
                                    <option value="Impermeables" <%= catalogo.marca === 'Impermeables' ? 'selected' : '' %>>IMPERMEABLES</option>
                                    <option value="InsumosMedicos" <%= catalogo.marca === 'InsumosMedicos' ? 'selected' : '' %>>INSUMOS MÉDICOS</option>
                                    <option value="Juguetes" <%= catalogo.marca === 'Juguetes' ? 'selected' : '' %>>JUGUETES</option>
                                    <option value="Lamparas" <%= catalogo.marca === 'Lamparas' ? 'selected' : '' %>>LÁMPARAS</option>
                                    <option value="LamparasInfantiles" <%= catalogo.marca === 'LamparasInfantiles' ? 'selected' : '' %>>LÁMPARAS INFANTILES</option>
                                    <option value="Licuadoras" <%= catalogo.marca === 'Licuadoras' ? 'selected' : '' %>>LICUADORAS</option>
                                    <option value="Linternas" <%= catalogo.marca === 'Linternas' ? 'selected' : '' %>>LINTERNAS</option>
                                    <option value="MaquinasYpatilleras" <%= catalogo.marca === 'MaquinasYpatilleras' ? 'selected' : '' %>>MÁQUINAS Y PATILLERAS</option>
                                    <option value="Mascotas" <%= catalogo.marca === 'Mascotas' ? 'selected' : '' %>>MASCOTAS</option>
                                    <option value="Masajeadores" <%= catalogo.marca === 'Masajeadores' ? 'selected' : '' %>>MASAJEADORES</option>
                                    <option value="Memorias" <%= catalogo.marca === 'Memorias' ? 'selected' : '' %>>MEMORIAS</option>
                                    <option value="Navidad" <%= catalogo.marca === 'Navidad' ? 'selected' : '' %>>NAVIDAD</option>
                                    <option value="OllasArroceras" <%= catalogo.marca === 'OllasArroceras' ? 'selected' : '' %>>OLLAS ARROCERAS</option>
                                    <option value="OllasPresion" <%= catalogo.marca === 'OllasPresion' ? 'selected' : '' %>>OLLAS A PRESIÓN</option>
                                    <option value="Organizadores" <%= catalogo.marca === 'Organizadores' ? 'selected' : '' %>>ORGANIZADORES</option>
                                    <option value="Parlantes" <%= catalogo.marca === 'Parlantes' ? 'selected' : '' %>>PARLANTES</option>
                                    <option value="Pilas" <%= catalogo.marca === 'Pilas' ? 'selected' : '' %>>PILAS</option>
                                    <option value="Picatodos" <%= catalogo.marca === 'Picatodos' ? 'selected' : '' %>>PICATODOS</option>
                                    <option value="PistolasdeSiliconas" <%= catalogo.marca === 'PistolasdeSiliconas' ? 'selected' : '' %>>PISTOLAS DE SILICONA</option>
                                    <option value="PlanchasdeRopa" <%= catalogo.marca === 'PlanchasdeRopa' ? 'selected' : '' %>>PLANCHAS DE ROPA</option>
                                    <option value="Radios" <%= catalogo.marca === 'Radios' ? 'selected' : '' %>>RADIOS</option>
                                    <option value="Relojes" <%= catalogo.marca === 'Relojes' ? 'selected' : '' %>>RELOJES</option>
                                    <option value="Sombrillas" <%= catalogo.marca === 'Sombrillas' ? 'selected' : '' %>>SOMBRILLAS</option>
                                    <option value="Tecnologia" <%= catalogo.marca === 'Tecnologia' ? 'selected' : '' %>>TECNOLOGÍA</option>
                                    <option value="Telefono" <%= catalogo.marca === 'Telefono' ? 'selected' : '' %>>TELÉFONO</option>
                                    <option value="Termos" <%= catalogo.marca === 'Termos' ? 'selected' : '' %>>TERMOS</option>
                                    <option value="Veladoras" <%= catalogo.marca === 'Veladoras' ? 'selected' : '' %>>VELADORAS</option>
                                    <option value="Ventiladores" <%= catalogo.marca === 'Ventiladores' ? 'selected' : '' %>>VENTILADORES</option>
                                    
                                    <!-- Añade más opciones aquí según sea necesario -->
                                    
                                </select>
                            </div>
                        
                            <div class="mb-3">
                                <label for="nombre" class="form-label">NOMBRE</label>
                                <input type="text" class="form-control" id="nombre" name="nombre" value="<%= catalogo.nombre %>" required>
                            </div>
                        
                            <div class="mb-3">
                                <label for="descripcion" class="form-label">DESCRIPCIÓN</label>
                                <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required><%= catalogo.descripcion %></textarea>
                            </div>

                            <div class="mb-3">
                                <label for="terminosGarantia" class="form-label">TÉRMINOS DE GARANTÍA</label>
                                <textarea class="form-control" id="terminosGarantia" name="terminosGarantia" rows="3"><%= catalogo.terminos_garantia %></textarea>
                            </div>
                        
                            <div class="mb-3">
                                <label for="certificacion" class="form-label">CERTIFICACIÓN</label>
                                <select class="custom-select" id="certificacion" name="certificacion" required>
                                    <option value="siHay" <%= catalogo.certificacion === 'siHay' ? 'selected' : '' %>>SI HAY</option>
                                    <option value="noHay" <%= catalogo.certificacion === 'noHay' ? 'selected' : '' %>>NO HAY</option>
                                </select>
                            </div>
                        
                            <div class="mb-3">
                                <label for="precioMayorista" class="form-label">PRECIO MAYORISTA</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <!-- Cargamos el valor completo (sin formato) para el campo de edición -->
                                    <input type="text" class="form-control" id="precioMayorista" name="precioMayorista"
                                           value="<%= catalogo.precio_mayorista %>" required inputmode="numeric" pattern="[0-9]*" 
                                           oninput="this.value = this.value.replace(/[^0-9]/g, '');">
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="precioDetal" class="form-label">PRECIO AL DETAL</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <!-- Cargamos el valor completo (sin formato) para el campo de edición -->
                                    <input type="text" class="form-control" id="precioDetal" name="precioDetal"
                                           value="<%= catalogo.precio_detal %>" required inputmode="numeric" pattern="[0-9]*" 
                                           oninput="this.value = this.value.replace(/[^0-9]/g, '');">
                                </div>
                            </div>
                         
                        
                            <div class="mb-3">
                                <label for="imagen" class="form-label">DIRECCIÓN DE LA IMAGEN</label>
                                <input type="text" class="form-control" id="imagen" name="imagen" value="<%= catalogo.imagen %>" required oninput="previewImage()">
                                <img id="preview" src="<%= catalogo.imagen %>" alt="Previsualización de la imagen" class="img-fluid mt-2" style="max-height: 200px;">
                            </div>
                        
                            <button type="submit" class="btn btn-primary">GUARDAR CAMBIOS</button>
                        </form>                        
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

<script>
    function validateInput(input) {
        var forbiddenChars = /[^a-zA-Z\s]/g;
        var errorMessage = document.getElementById('error-message');
        if (forbiddenChars.test(input.value)) {
            errorMessage.style.display = 'block';
        } else {
            errorMessage.style.display = 'none';
        }
    }

    function validateForm() {
        var forbiddenChars = /[^a-zA-Z\s]/g;
        var input = document.getElementById('marca');
        var errorMessage = document.getElementById('error-message');
        if (forbiddenChars.test(input.value)) {
            errorMessage.style.display = 'block';
            // Desplazar la página hasta el principio del formulario
            window.scrollTo(180, 180);
            return false; // Evitar que se envíe el formulario
        } else {
            errorMessage.style.display = 'none';
            return true; // Permitir que se envíe el formulario
        }
    }
</script>

<script>
    // Obtener el campo de entrada y la imagen de previsualización
    const inputImagen = document.getElementById('imagen');
    const imagenPreview = document.getElementById('preview');

    // Agregar un evento de cambio al campo de entrada
    inputImagen.addEventListener('input', () => {
        // Obtener el valor del campo de entrada
        const imageUrl = inputImagen.value;

        // Actualizar la fuente de la imagen de previsualización con la URL ingresada
        imagenPreview.src = imageUrl;
    });
</script>
<!-- 
<script>
    // Función para formatear el número mientras se escribe
    function formatearNumero(input) {
    let valor = input.value;
    // Eliminar todas las comas
    valor = valor.replace(/,/g, '');
    // Formatear el número con comas
    input.value = parseFloat(valor).toLocaleString('en-US', { minimumFractionDigits: 0 });
}

function quitarComas(input) {
    let valor = input.value;
    // Eliminar comas para almacenar el número correctamente
    input.value = valor.replace(/,/g, '');
}

</script> -->


</html>